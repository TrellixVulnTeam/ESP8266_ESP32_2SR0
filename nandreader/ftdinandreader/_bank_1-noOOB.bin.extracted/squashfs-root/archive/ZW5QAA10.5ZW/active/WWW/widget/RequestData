<%
    cgilua.lp.include("lp/xml.lp")
    cgilua.contentheader("text","xml")

    local configurationData = cgilua.QUERY["ConfigurationData"]
    local open=io.open

    if configurationData=="Device" then
    	httperror(400, "Bad Request")
    end 

    if configurationData=="WidgetAssurance" then
        xmlCreate(configurationData)
        local fh = open ("/tmp/Widget.xml")
        if fh~=nil then
            src = fh:read("*a")    
            cgilua.put(src)
        end 
        fh:close()
        --cgilua.redirect("/Widget.xml")
    end
%>
